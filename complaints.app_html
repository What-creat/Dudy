<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Complaints Journal</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
        h1 { color: #333; }
        #complaint-input { width: 100%; padding: 10px; margin-bottom: 10px; }
        button { padding: 10px 15px; margin: 5px; background-color: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        #complaints-list { margin-top: 20px; }
        .complaint { border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; background-color: white; }
        .complaint-actions { margin-top: 10px; }
        #search { width: 100%; padding: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>
    <h1>My Complaints Journal</h1>
    <p>Use this app to vent and track your thoughts. Data is stored locally in your browser.</p>
    
    <textarea id="complaint-input" placeholder="Enter your complaint here..."></textarea>
    <button id="add-btn">Add Complaint</button>
    
    <input type="text" id="search" placeholder="Search complaints...">
    
    <div id="complaints-list"></div>
    
    <button id="export-btn">Export All as Text File</button>

    <script>
        const input = document.getElementById('complaint-input');
        const addBtn = document.getElementById('add-btn');
        const list = document.getElementById('complaints-list');
        const search = document.getElementById('search');
        const exportBtn = document.getElementById('export-btn');

        let complaints = JSON.parse(localStorage.getItem('complaints')) || [];

        function renderComplaints(filter = '') {
            list.innerHTML = '';
            complaints
                .filter(c => c.text.toLowerCase().includes(filter.toLowerCase()))
                .forEach((complaint, index) => {
                    const div = document.createElement('div');
                    div.className = 'complaint';
                    div.innerHTML = `
                        <p><strong>${complaint.date}</strong></p>
                        <p>${complaint.text}</p>
                        <div class="complaint-actions">
                            <button onclick="editComplaint(${index})">Edit</button>
                            <button onclick="deleteComplaint(${index})">Delete</button>
                        </div>
                    `;
                    list.appendChild(div);
                });
        }

        addBtn.addEventListener('click', () => {
            if (input.value.trim()) {
                complaints.push({
                    text: input.value,
                    date: new Date().toLocaleString()
                });
                localStorage.setItem('complaints', JSON.stringify(complaints));
                input.value = '';
                renderComplaints();
            }
        });

        search.addEventListener('input', () => {
            renderComplaints(search.value);
        });

        exportBtn.addEventListener('click', () => {
            const text = complaints.map(c => `${c.date}: ${c.text}`).join('\n\n');
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'complaints.txt';
            a.click();
            URL.revokeObjectURL(url);
        });

        function editComplaint(index) {
            const newText = prompt('Edit complaint:', complaints[index].text);
            if (newText !== null && newText.trim()) {
                complaints[index].text = newText;
                localStorage.setItem('complaints', JSON.stringify(complaints));
                renderComplaints();
            }
        }

        function deleteComplaint(index) {
            if (confirm('Delete this complaint?')) {
                complaints.splice(index, 1);
                localStorage.setItem('complaints', JSON.stringify(complaints));
                renderComplaints();
            }
        }

        renderComplaints();
    </script>
</body>
</html>
